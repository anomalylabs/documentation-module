{% macro make(sections, depth) %}
    {% for section in sections %}

        {%  set heading = section.level + 1 %}

        <div class="section">

            <h{{ heading < 6 ?: 5 }}>

                {{ section.title }}

                <a class="permalink" name="{{ section.path }}" href="#{{ section.path }}">
                    {{ icon('link') }}
                </a>

            </h{{ heading < 6 ?: 5 }}>

            {{ section.make.getContent()|raw }}

        </div>

        {% if not section.children.isEmpty() %}
            {{ _self.make(section.children, depth+1) }}
        {% endif %}

    {% endfor %}
{% endmacro %}
