{% macro make(sections, depth) %}

    {% import _self as self %}

    {% for section in sections %}

        <div class="section">

            <h{{ section.level(4) + 1 }}>

                {{ section.title }}

                <a class="permalink" name="{{ section.path }}" href="#{{ section.path }}">
                    {{ icon('fa fa-link') }}
                </a>

            </h{{ section.level(4) + 1 }}>

            {{ section.make.getContent()|raw }}

        </div>

        {% if not section.children.isEmpty() %}
            {{ self.make(section.children, depth+1) }}
        {% endif %}

    {% endfor %}
{% endmacro %}
